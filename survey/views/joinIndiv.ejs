<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>BLOCK Survey</title>

  <link href="../stylesheets/style.css" rel="stylesheet">
  <link href="../stylesheets/loginNjoin.css" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css?family=Amaranth&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <!-- Bootstrap core CSS -->
  <link href="../stylesheets/bootstrap.min.css" rel="stylesheet">
  <!--  Custom styles for this template -->
  <link href="../stylesheets/starter-template.css" rel="stylesheet">
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!--[if lt IE 9]-->
         <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
         <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <!--[endif]-->
      <script type="text/javascript" src="./javascripts/web3.js"></script>
      <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  

      <style>
          .amfont{
            font-family: 'Amaranth', sans-serif;
          }
        </style>

</head>

<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/solid.js" integrity="sha384-+Ga2s7YBbhOD6nie0DzrZpJes+b2K1xkpKxTFFcx59QmVPaSA8c7pycsNaFwUK6l" crossorigin="anonymous"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/fontawesome.js" integrity="sha384-7ox8Q2yzO/uWircfojVuCQOZl+ZZBg2D2J5nkpLqzH1HY0C1dHlTKIbpRz/LG23c" crossorigin="anonymous"></script>

<body>
<!--[index]-->
<nav class="navbar navbar-expand-lg navbar-primary navbar-fixed-top">
    <div class = "amfont">              
        <a class="navbar-brand">　　　B l o c k S u r v e y　　　</a>
    </div>
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbarsExample03" 
              aria-expanded="false" aria-controls="navbarExample03">
          <span class="navbar-toggler-icon"></span>
        </button>
        
      <div id="navbarExmaple03" class="collapse navbar-collapse">
        <ul class="nav navbar-nav mr-auto">
          <li class="active"><a href="./"><span class="span class= fas fa-home"></span> Home</a></li>     
        </ul>

        <ul class="nav navbar-nav navbar-right">
          <li><a href= "loginIndiv"><span class="fas fa-sign-in-alt"></span> log in </a></li>
        </ul>
      </div>
</nav>  

<!-- Form-->
<div class="form">
    <div class="form-toggle"></div>
    <div class="form-panel one">
      <div class="form-header">
      <h1>Make Account</h1>
      </div>
              <a class="btn"  role="button" onclick="create()">　　　click! Create Wallet　　　</a>
              <div class="form-group">
              <small id="informationHelp" class="form-text text-muted">*Make Sure U create wallet first before you click sumbit.</small>
              </div>
          <!-- </div> -->
          <div class="form-group">
            <label for="address">Password</label>
            <input type="text" id="password" name="address" required="required"/>
          </div>

          <div class="form-group">
            <label for="address">address</label>
            <input type="text" id="address" name="address" required="required"/>
          </div>
          
          <div class="form-group">
            <label for="privateKey">private key</label>
            <input type="text" id="privateKey" name="privateKey" required="required"/>
          </div>
 
          <div class="form-group">
              <label for="KeyStore">key store file</label>
              <input type="text" id="KeyStore" name="KeyStore" required="required"/>
            </div>
  
          <div class="form-group">
              <button type="submit" id="submit">확인</button>
            <!-- <button type="submit" id="submit" onclick="location.href='./'">확인</button> -->
            <button type="reset">취소</button>
          </div>
  
        </form>
      </div>
    </div>
  </div>


       <!-- FOOTER -->
       <div class ="margin">
        <footer>
          <p class="pull-right"><a href="#">Back to top</a></p>
       </div>


</body>
<script>
  function create(){
    console.log("실행됨")
    var password = document.getElementById('password').value;
        a = Promise.resolve(web3.eth.accounts.create(web3.utils.randomHex(32)));
        a.then(function (result) {
          address = result.address;
          var password = document.getElementById('password').value;
            keyStore = JSON.stringify(web3.eth.accounts.encrypt(result.privateKey, password));
            alert("지갑이 생성되었습니다!" +
                "\n생성된 계좌 번호는 : " + result.address 
                   + "\n private key는 : " + result.privateKey);
            $('#address').val(result.address); 
            $('#privateKey').val(result.privateKey);
            $('#KeyStore').val(keyStore);
            console.log("addr, pk, ks 생성 완료됨");
            });
          }
  </script>
</html>